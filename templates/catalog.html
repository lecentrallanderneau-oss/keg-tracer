{% extends "base.html" %}
{% block content %}
<h2>Catalogue (produits actifs)</h2>

<div class="card" style="margin-bottom:16px;">
  <form method="post" action="{{ url_for('add_product') }}">
    <div class="grid" style="grid-template-columns: 2fr 1fr 1fr 1fr auto;">
      <div>
        <label for="name">Nom</label><br>
        <input type="text" id="name" name="name" required>
      </div>
      <div>
        <label for="supplier">Fournisseur</label><br>
        <input type="text" id="supplier" name="supplier">
      </div>
      <div>
        <label for="size_l">Taille (L)</label><br>
        <input type="number" id="size_l" name="size_l" value="30" min="1">
      </div>
      <div>
        <label for="deposit_eur">Consigne (€)</label><br>
        <input type="number" step="0.01" id="deposit_eur" name="deposit_eur" value="30">
      </div>
      <div style="align-self:end;">
        <label><input type="checkbox" name="active" checked> Actif</label><br>
        <button class="btn btn-primary" type="submit">Ajouter</button>
      </div>
    </div>
  </form>
</div>

<table>
  <thead>
    <tr><th>Nom</th><th>Fournisseur</th><th>Taille (L)</th><th>Consigne (€)</th></tr>
  </thead>
  <tbody>
    {% for p in products %}
      <tr>
        <td>{{ p.name }}</td>
        <td>{{ p.supplier or "—" }}</td>
        <td>{{ p.size_l }}</td>
        <td>{{ "%.2f"|format(p.deposit_eur) }}</td>
      </tr>
    {% else %}
      <tr><td colspan="4">Aucun produit actif.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
