{% extends "base.html" %}
</div>
</div>

<div class="row g-3 mt-3">
<div class="col-12 col-xl-6">
<div class="card p-3 h-100">
<div class="d-flex justify-content-between align-items-center">
<div class="card-title h6 mb-0">Dernières livraisons</div>
<a href="/deliveries" class="btn btn-sm btn-outline-light">Voir tout</a>
</div>
{% set items = recent_deliveries|default([]) %}
{% if items %}
<div class="table-responsive mt-2">
<table class="table table-sm align-middle">
<thead>
<tr><th>Date</th><th>Fournisseur</th><th>Produit</th><th>Qté</th><th>Consigne</th></tr>
</thead>
<tbody>
{% for d in items %}
<tr>
<td>{{ d.date|default('—') }}</td>
<td>{{ d.supplier|default('—') }}</td>
<td>{{ d.product|default('—') }}</td>
<td>{{ d.quantity|default(0) }}</td>
<td>{{ '{:,.2f}'.format((d.deposit|default(0)|float)) }} €</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% else %}
<div class="empty">Aucune livraison récente.</div>
{% endif %}
</div>
</div>

<div class="col-12 col-xl-6">
<div class="card p-3 h-100">
<div class="d-flex justify-content-between align-items-center">
<div class="card-title h6 mb-0">Fûts en circulation</div>
<a href="/kegs" class="btn btn-sm btn-outline-light">Voir tout</a>
</div>
{% set k = kegs_in_circulation|default([]) %}
{% if k %}
<div class="table-responsive mt-2">
<table class="table table-sm align-middle">
<thead>
<tr><th>ID Fût</th><th>Produit</th><th>Statut</th><th>Depuis</th></tr>
</thead>
<tbody>
{% for keg in k %}
<tr>
<td>{{ keg.id|default('—') }}</td>
<td>{{ keg.product|default('—') }}</td>
<td>
{% set st = (keg.status|default('unknown')) %}
<span class="badge bg-{% if st=='full' %}success{% elif st=='empty' %}secondary{% elif st=='lost' %}danger{% else %}warning{% endif %}">
{{ st }}
</span>
</td>
<td>{{ keg.since|default('—') }}</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% else %}
<div class="empty">Aucun fût en circulation.</div>
{% endif %}
</div>
</div>
</div>
{% endblock %}
